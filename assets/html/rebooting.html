{% extends "base.html" %}
{% block title %}Rebooting...{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row justify-content-center">
        <div class="col-lg-6">
            <div class="card shadow-lg border-0 rounded-lg mt-5">
                <div class="card-header bg-warning text-dark text-center py-4">
                    <h3 class="font-weight-light">
                        <i class="fas fa-power-off fa-fw"></i> Pi is Rebooting...
                    </h3>
                </div>
                <div class="card-body text-center py-5">
                    <div class="spinner-border text-warning mb-4" style="width: 3rem; height: 3rem;" role="status">
                        <span class="sr-only">Rebooting...</span>
                    </div>
                    <h4 class="text-muted">Please wait <span id="countdown">60</span> seconds</h4>
                    <p class="text-muted mt-3">The device is restarting to apply changes.</p>
                    <p class="text-muted small">You will be redirected to the main page when complete.</p>
                </div>
                <div class="card-footer text-center py-3 bg-light">
                    <a href="/" class="btn btn-primary" id="manualBtn" style="display:none;">
                        <i class="fas fa-home"></i> Go to Main Page
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    let seconds = 60;
    const countdownEl = document.getElementById('countdown');
    const manualBtn = document.getElementById('manualBtn');

    const timer = setInterval(() => {
        seconds--;
        countdownEl.textContent = seconds;

        if (seconds <= 0) {
            clearInterval(timer);
            // Redirect to main page
            window.location.href = "/";
        }
    }, 1000);

    // Show manual button after 60s as fallback
    setTimeout(() => {
        manualBtn.style.display = 'inline-block';
    }, 60000);
</script>
{% endblock %}